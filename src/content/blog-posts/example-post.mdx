---
title: Using Git Worktrees with AI
slug: ai-makes-git-worktrees-infinitely-more-powerful
summary: >-
  Git worktrees unlocked my final barrier to coding superpowers with AI and have transformed how I develop software.
author: Nicholas Khami
createdAt: 2024-05-26T18:52:00.000Z
updatedAt: 2024-05-26T18:52:00.000Z
isDraft: false
isFeatured: true
categories:
  - ai
  - codegen
---

import Pile from "../../components/Pile.astro";

My initial workflow with AI coding agents was to prompt them to perform some task, tab away to something else, and then return in a few minutes to evaluate the results. This made me feel like a fitless person from Wall-E. I felt lazy and unproductive, waiting for the AI to do the work for me.

### Transforming my initial passive workflow with AI

AI coding agents have been touted as a force multiplier for developers, allowing me to get drastically more done in the same period of time. However, this was not my initial experience. I found myself prompting the agent to perform some task, tabbing away to something else, and then returning every few minutes to evaluate the results, re-prompt, and repeat the cycle. This made me feel like a fitless person from Wall-E.

Iterating on my workflow with git worktrees completely transformed my experience. I immediately started to feel more like a powerful commanding officer, directing a fleet of AI agents to perform tasks in parallel. Many others have also found this to be the case as evidenced by [Claude Code's docs](https://docs.anthropic.com/en/docs/claude-code/tutorials#run-parallel-claude-code-sessions-with-git-worktrees), [discussion on HN](https://news.ycombinator.com/item?id=44043717), and projects like [claude squad](https://github.com/smtg-ai/claude-squad). See the threejs space below for some fun X posts about it.

<Pile />

### Why worktrees work so well with AI

My favorite metaphor for the worktree development process is that it's similar to how you could [hire 5 to 10 people on fiverr to do the same task](https://x.com/garrytan/status/1918027171039461435) and then work with who becomes clearly the best performers long term.

LLMs are stochastic systems and, even the same model with the same prompt, will almost always produce a different result each time you run it. This means that you can get more value out of AI agents by rolling out the same prompt to multiple copies of the same agent system in parallel and trusting a good result to emerge from at least one of them. Think of it like a monte carlo simulation, where you run the same prompt multiple times and then select the best result.

Worktrees allow you to do this at an automatable scale by rolling out the same prompt to multiple copies of the same agent in parallel, each in its own completely isolated copy of your codebase. Depending on how difficult the task is, you can run more or fewer agents in parallel. For example, if I'm doing something in Trieve's Rust backend, I might run 5 agents in parallel. However, if I'm adding a react component to the frontend, I might just run 2.

### We need software that makes this easier

My co-founder, [Denzell](https://x.com/cdxker), and our founding engineer, [Drew](https://github.com/drew-harris), are much better at controlling their computers than I am and have created a fantastic setup using [nushell](https://nushell.sh/) and [nvim](https://neovim.io/). Take a look at their [dotfiles](https://github.com/drew-harris/nvim-config) and the below video of a look at their workflow in action.

![Denzell and Drew's AI coding workflow](https://trieve.b-cdn.net/blog/git-worktrees/git-worktrees-ai-coding-cropped.gif)

### Future of work will look like a RTS game

The future of work with AI coding agents will look like a real-time strategy (RTS) game, where you are the commander directing a fleet of AI agents to perform tasks in parallel. You can think of each agent as a worker unit in an RTS game, and you are the player directing them to perform tasks in the most efficient way possible.

Worktrees do a lot to make this possible for coding, but the concrete developer experience with either an IDE/plugin ([windsurf](https://windsurf.com/), [cline](https://cline.bot/), [cursor](https://www.cursor.com/)) or terminal interface ([aider](https://aider.chat/), [plandex](https://github.com/plandex-ai/plandex), [codex](https://help.openai.com/en/articles/11096431-openai-codex-cli-getting-started), [claude-code](https://www.anthropic.com/claude-code)) is still clunky. Only the most elite multi-taskers are going to be able to handle the mental overhead of screens like this:

## Online discussion
